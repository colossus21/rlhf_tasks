<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sorting Algorithm Visualizer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: sans-serif; }
        #canvasContainer { margin: 20px 0; }
        .button { margin: 5px; }
    </style>
</head>
<body class="bg-gray-100 p-4">

<h1 class="text-3xl font-bold mb-4">Sorting Algorithm Visualizer</h1>

<div class="flex flex-wrap justify-center mb-4">
    <button id="selectionSort" class="button bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Selection Sort</button>
    <button id="bubbleSort" class="button bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Bubble Sort</button>
    <button id="insertionSort" class="button bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Insertion Sort</button>
    <button id="mergeSort" class="button bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Merge Sort</button>
    <button id="quickSort" class="button bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Quick Sort</button>
    <button id="heapSort" class="button bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Heap Sort</button>
</div>

<div class="mb-4">
    <label for="speedSlider" class="block text-sm font-medium text-gray-700">Speed</label>
    <input type="range" min="1" max="100" value="50" class="w-full" id="speedSlider">
</div>

<div id="canvasContainer"></div>

<script>
    let values = [];
    let w;
    let states = [];
    let speed = 50;

    function setup() {
        let canvas = createCanvas(800, 400);
        canvas.parent('canvasContainer');
        w = width / 100;
        for (let i = 0; i < 100; i++) {
            values[i] = random(1, 250);
            states[i] = -1; // -1 indicates unsorted
        }
    }

    function draw() {
        background(230);
        for (let i = 0; i < values.length; i++) {
            if (states[i] == 0) fill(255, 102, 102); // Red for current comparison
            else if (states[i] == 1) fill(102, 255, 102); // Green for sorted
            else fill(255);
            rect(i * w, height - values[i], w, values[i]);
        }
    }

    // Sorting algorithms implementation would go here, calling `sortStep()` at each step
    // with logic to update `values` and `states`.

    function selectionSort() {
        // Implementation of selection sort
    }

    function bubbleSort() {
        // Implementation of bubble sort
    }

    function insertionSort() {
        // Implementation of insertion sort
    }

    function mergeSort() {
        // Implementation of merge sort
    }

    function quickSort() {
        // Implementation of quick sort
    }

    function heapSort() {
        // Implementation of heap sort
    }

    // Event listeners for buttons
    document.querySelectorAll('.button').forEach(button => {
        button.addEventListener('click', function() {
            resetArray();
            switch(this.id) {
                case 'selectionSort': selectionSort(); break;
                case 'bubbleSort': bubbleSort(); break;
                case 'insertionSort': insertionSort(); break;
                case 'mergeSort': mergeSort(); break;
                case 'quickSort': quickSort(); break;
                case 'heapSort': heapSort(); break;
            }
        });
    });

    document.getElementById('speedSlider').addEventListener('input', function(e) {
        speed = 100 - e.target.value; // Invert since higher value should mean slower speed
    });

    function resetArray() {
        for (let i = 0; i < values.length; i++) {
            values[i] = random(1, 250);
            states[i] = -1;
        }
    }

    // This function would be called within each sorting algorithm to simulate delay
    function sortStep() {
        if (speed > 0) {
            setTimeout(() => requestAnimationFrame(draw), speed);
        } else {
            draw();
        }
    }

</script>

</body>
</html>