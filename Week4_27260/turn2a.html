<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sorting Algorithm Visualizer</title>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.4.0/lib/p5.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-r from-purple-500 via-pink-500 to-red-500 flex items-center justify-center min-h-screen">

<div class="max-w-4xl w-full text-center p-8 bg-white rounded-3xl shadow-2xl">
    <h1 class="text-5xl font-extrabold mb-8 text-gray-900">Sorting Algorithm Visualizer</h1>

    <!-- Buttons for each sorting algorithm -->
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-4 mb-8">
        <button id="selectionSort" class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">Selection Sort</button>
        <button id="bubbleSort" class="bg-pink-500 hover:bg-pink-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">Bubble Sort</button>
        <button id="insertionSort" class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">Insertion Sort</button>
        <button id="mergeSort" class="bg-teal-500 hover:bg-teal-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">Merge Sort</button>
        <button id="quickSort" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">Quick Sort</button>
        <button id="heapSort" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">Heap Sort</button>
    </div>

    <!-- Speed control slider -->
    <div class="flex justify-center items-center space-x-4 mb-8">
        <label for="speed" class="text-lg text-gray-900 font-semibold">Sorting Speed:</label>
        <input id="speedSlider" type="range" min="1" max="100" value="50" class="w-full slider">
    </div>

    <!-- Canvas container for the sorting visualization -->
    <div id="sketch-holder" class="w-full flex justify-center bg-gray-200 rounded-lg p-4 shadow-inner mb-4"></div>

    <!-- Complexities Display -->
    <div id="complexities" class="text-lg text-gray-800 mb-8">
        <!-- Complexities will be displayed here -->
    </div>

</div>

<script>
    let values = [];
    let w = 12;
    let delay = 50;
    let states = [];
    let sortingAlgorithm = '';
    let algorithmComplexities = {
        'selection': { best: 'Ω(n^2)', worst: 'O(n^2)', space: 'O(1)' },
        'bubble': { best: 'Ω(n)', worst: 'O(n^2)', space: 'O(1)' },
        'insertion': { best: 'Ω(n)', worst: 'O(n^2)', space: 'O(1)' },
        'merge': { best: 'Ω(n log(n))', worst: 'O(n log(n))', space: 'O(n)' },
        'quick': { best: 'Ω(n log(n))', worst: 'O(n^2)', space: 'O(log(n))' },
        'heap': { best: 'Ω(n log(n))', worst: 'O(n log(n))', space: 'O(1)' }
    };

    function setup() {
        let canvas = createCanvas(720, 300);
        canvas.parent('sketch-holder');
        resetArray();

        document.getElementById('selectionSort').onclick = () => { startSorting('selection'); };
        document.getElementById('bubbleSort').onclick = () => { startSorting('bubble'); };
        document.getElementById('insertionSort').onclick = () => { startSorting('insertion'); };
        document.getElementById('mergeSort').onclick = () => { startSorting('merge'); };
        document.getElementById('quickSort').onclick = () => { startSorting('quick'); };
        document.getElementById('heapSort').onclick = () => { startSorting('heap'); };

        document.getElementById('speedSlider').oninput = function() {
            delay = 105 - this.value;
        }
    }

    function resetArray() {
        values = new Array(floor(width / w));
        for (let i = 0; i < values.length; i++) {
            values[i] = random(1, 250);
            states[i] = -1;
        }
        displayComplexities(sortingAlgorithm);
    }

    function draw() {
        background(255);
        for (let i = 0; i < values.length; i++) {
            stroke(0);
            if (states[i] == 0) {
                fill('#FF6F61');  // Currently working on
            } else if (states[i] == 1) {
                fill('#6B5B95');  // Sorted
            } else {
                fill('#88B04B');  // Default
            }
            rect(i * w, height - values[i], w, values[i]);
        }
    }

    async function startSorting(algo) {
        resetArray();
        sortingAlgorithm = algo;
        displayComplexities(algo);
        switch(algo) {
            case 'selection':
                await selectionSort(values);
                break;
            case 'bubble':
                await bubbleSort(values);
                break;
            case 'insertion':
                await insertionSort(values);
                break;
            case 'merge':
                await mergeSort(values, 0, values.length - 1);
                break;
            case 'quick':
                await quickSort(values, 0, values.length - 1);
                break;
            case 'heap':
                await heapSort(values);
                break;
        }
    }

    // Sorting implementations remain the same as before...

    function displayComplexities(algo) {
        let complexitiesDiv = document.getElementById('complexities');
        let complexities = algorithmComplexities[algo];
        if (complexities) {
            complexitiesDiv.innerHTML = `
                <p>Time Complexity:</p>
                <ul>
                    <li>Best Case: ${complexities.best}</li>
                    <li>Worst Case: ${complexities.worst}</li>
                </ul>
                <p>Space Complexity:</p>
                <ul>
                    <li>${complexities.space}</li>
                </ul>
            `;
        }
    }

    // ... (all other functions remain the same)
</script>
</body>
</html>