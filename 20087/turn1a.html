<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Contact Book</title>
</head>
<body>
<form id="contactForm">
    <input type="text" id="name" placeholder="Name" required>
    <input type="email" id="email" placeholder="Email" required>
    <button type="submit">Add Contact</button>
</form>
<ul id="contactList"></ul>
<div id="errorMessage"></div>

<script>
    const ContactBook = {
        Model: {
            contacts: [],

            addContact(contact) {
                if (contact.name && this.isValidEmail(contact.email)) {
                    this.contacts = [contact, ...this.contacts];
                    return true;
                }
                return false;
            },

            isValidEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            }
        },

        View: {
            contactListElement: document.getElementById('contactList'),
            errorMessageElement: document.getElementById('errorMessage'),

            render(contacts) {
                this.contactListElement.innerHTML = contacts.map(contact =>
                    `<li>Name: ${contact.name}, Email: ${contact.email}</li>`
                ).join('');
            },

            showError(message) {
                this.errorMessageElement.textContent = message;
            },

            clearError() {
                this.errorMessageElement.textContent = '';
            }
        },

        Controller: {
            init() {
                document.getElementById('contactForm').addEventListener('submit', this.handleSubmit.bind(this));
            },

            handleSubmit(event) {
                event.preventDefault();
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                this.addContact(name, email);
            },

            addContact(name, email) {
                ContactBook.View.clearError();
                const success = ContactBook.Model.addContact({name, email});
                if (success) {
                    ContactBook.View.render(ContactBook.Model.contacts);
                    document.getElementById('contactForm').reset();
                } else {
                    ContactBook.View.showError('Failed to add contact. Please check the name and email.');
                }
            }
        }
    };

    ContactBook.Controller.init();
</script>
</body>
</html>