<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eco Cycle</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f0f0f0;
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            padding: 20px;
        }
        .game-container {
            text-align: center;
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(6, 50px);
            gap: 2px;
            margin: 20px 0;
        }
        .cell {
            width: 50px;
            height: 50px;
            border: 1px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        .player1 { border-color: blue; }
        .player2 { border-color: red; }
        .species-btn {
            background-color: #343a40;
            color: white;
            border: none;
            padding: 10px 15px;
            margin: 5px;
            font-size: 20px;
            cursor: pointer;
        }
        .species-btn.selected {
            background-color: #ff8c00;
        }
        #restartBtn {
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div class="game-container">
    <h1>Eco Cycle</h1>
    <div id="speciesSelector"></div>
    <div class="grid" id="gameGrid"></div>
    <div>
        <p>Player 1: <span id="score1">0</span></p>
        <p>Player 2: <span id="score2">0</span></p>
    </div>
    <button id="restartBtn" class="btn btn-secondary">Restart Game</button>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
    const gridSize = 6;
    let currentPlayer = 1;
    let gameState = Array(gridSize * gridSize).fill(null);
    let score1 = 0, score2 = 0;
    const species = ['üåø', 'üê∞', 'ü¶ä', 'üçÑ'];
    const selectedSpecies = { 'player1': null, 'player2': null };

    function createGrid() {
        const grid = $('#gameGrid');
        grid.empty();
        for (let i = 0; i < gridSize * gridSize; i++) {
            grid.append('<div class="cell"></div>');
        }
    }

    function setupSpeciesSelector() {
        const selector = $('#speciesSelector');
        species.forEach((spec, index) => {
            let btn = $(`<button class="species-btn">${spec}</button>`).click(() => selectSpecies(index));
            selector.append(btn);
        });
    }

    function selectSpecies(index) {
        if ((currentPlayer === 1 && !selectedSpecies.player1) || (currentPlayer === 2 && !selectedSpecies.player2)) {
            $('.species-btn').removeClass('selected');
            $(`.species-btn:eq(${index})`).addClass('selected');
            if (currentPlayer === 1) selectedSpecies.player1 = index;
            else selectedSpecies.player2 = index;
        }
    }

    function placeSpecies(cell, player, speciesIndex) {
        if (cell.html() === '' && ((player === 1 && speciesIndex === selectedSpecies.player1) || (player === 2 && speciesIndex === selectedSpecies.player2))) {
            cell.html(species[speciesIndex]).addClass(player === 1 ? 'player1' : 'player2');
            const index = $('.cell').index(cell);
            gameState[index] = { player, species: speciesIndex };
            updateScore(index, player);
            checkGameEnd();
            currentPlayer = currentPlayer === 1 ? 2 : 1;
            $('.species-btn').removeClass('selected');
            selectedSpecies['player' + player] = null;
        }
    }

    function updateScore(index, player) {
        let points = 1;
        const directions = [-1, 1, -gridSize, gridSize, -gridSize-1, -gridSize+1, gridSize-1, gridSize+1];
        directions.forEach(dir => {
            let neighbor = index + dir;
            if (neighbor >= 0 && neighbor < gridSize * gridSize) {
                let cellContent = gameState[neighbor];
                if (cellContent) {
                    switch(species[gameState[index].species]) {
                        case 'üåø': if (cellContent.species === 3) points++; break;
                        case 'üê∞': if (cellContent.species === 0) points++; break;
                        case 'ü¶ä': if (cellContent.species === 1) points++; break;
                        case 'üçÑ': if (cellContent.species !== 3) points++; break;
                    }
                }
            }
        });
        if (player === 1) score1 += points;
        else score2 += points;
        $(`#score${player}`).text(player === 1 ? score1 : score2);
    }

    function checkGameEnd() {
        if (gameState.every(state => state !== null)) {
            let winner = score1 > score2 ? 'Player 1' : (score2 > score1 ? 'Player 2' : 'Tie');
            setTimeout(() => {
                alert(winner + " wins!");
                $('#restartBtn').show();
            }, 100);
        }
    }

    $('#restartBtn').click(function() {
        currentPlayer = 1;
        gameState = Array(gridSize * gridSize).fill(null);
        score1 = score2 = 0;
        $('#score1, #score2').text('0');
        createGrid();
        selectedSpecies.player1 = selectedSpecies.player2 = null;
        $(this).hide();
    });

    $(document).ready(function() {
        createGrid();
        setupSpeciesSelector();
        $('#gameGrid').on('click', '.cell', function() {
            const speciesIndex = currentPlayer === 1 ? selectedSpecies.player1 : selectedSpecies.player2;
            if (speciesIndex !== null) placeSpecies($(this), currentPlayer, speciesIndex);
        });
        $('#restartBtn').hide();
    });
</script>

</body>
</html>