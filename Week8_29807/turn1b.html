<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Word Matchers</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Orbitron', sans-serif;
            background: #000 url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="white" opacity="0.5"/></svg>') repeat;
            color: #0ff;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        .game-container {
            text-align: center;
            background: rgba(0, 10, 20, 0.8);
            padding: 20px;
            border: 2px solid #0ff;
            border-radius: 10px;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(5, 50px);
            gap: 5px;
            margin: 20px 0;
        }
        .letter {
            width: 50px;
            height: 50px;
            background: #005;
            border: 1px solid #0ff;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            cursor: pointer;
        }
        .player-indicator {
            margin-bottom: 10px;
            font-size: 1.5em;
        }
        button {
            background: #005;
            color: #0ff;
            border: 1px solid #0ff;
            padding: 10px 20px;
            cursor: pointer;
            font-family: inherit;
        }
        #timer {
            font-size: 1.2em;
            margin: 10px 0;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.4);
        }
        .modal-content {
            background-color: #000;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #0ff;
            width: 80%;
            max-width: 300px;
            text-align: center;
        }
    </style>
</head>
<body>

<div class="game-container">
    <div class="player-indicator" id="playerIndicator">Player 1's Turn</div>
    <div id="timer">15</div>
    <div class="grid" id="letterGrid"></div>
    <div id="currentWord"></div>
    <button onclick="submitWord()">Submit Word</button>
    <div>Score: <span id="score">0</span></div>
</div>

<div id="endGameModal" class="modal">
    <div class="modal-content">
        <p id="endGameMessage"></p>
        <button onclick="playAgain()">Play Again</button>
    </div>
</div>

<script>
    const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
    let grid = [];
    let currentWord = [];
    let currentPlayer = 1;
    let playerScores = {1: 0, 2: 0};
    let timer;
    const gridElement = document.getElementById('letterGrid');
    const timerElement = document.getElementById('timer');
    const currentWordElement = document.getElementById('currentWord');
    const scoreElement = document.getElementById('score');
    const playerIndicator = document.getElementById('playerIndicator');
    const endGameModal = document.getElementById('endGameModal');
    const endGameMessage = document.getElementById('endGameMessage');

    function initializeGame() {
        grid = Array.from({length: 25}, () => letters[Math.floor(Math.random() * letters.length)]);
        renderGrid();
        startTurn();
    }

    function renderGrid() {
        gridElement.innerHTML = '';
        grid.forEach(letter => {
            const div = document.createElement('div');
            div.className = 'letter';
            div.textContent = letter;
            div.onclick = () => selectLetter(letter);
            gridElement.appendChild(div);
        });
    }

    function selectLetter(letter) {
        currentWord.push(letter);
        updateCurrentWordDisplay();
    }

    function updateCurrentWordDisplay() {
        currentWordElement.textContent = currentWord.join('');
    }

    function submitWord() {
        const word = currentWord.join('');
        fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`)
            .then(response => response.ok ? response.json() : Promise.reject('Word not found'))
            .then(data => {
                if(data.length) {
                    const points = word.length * 3;
                    playerScores[currentPlayer] += points;
                    scoreElement.textContent = playerScores[currentPlayer];
                    currentWord.forEach(letter => {
                        const index = grid.indexOf(letter);
                        if (index > -1) grid.splice(index, 1, ' ');
                    });
                    currentWord = [];
                    updateCurrentWordDisplay();
                    renderGrid();
                    if(grid.filter(l => l !== ' ').length === 0) endGame();
                    else startTurn();
                }
            })
            .catch(() => {
                alert('Invalid word!');
                endTurn();
            });
    }

    function startTurn() {
        if(currentPlayer === 1) currentPlayer = 2;
        else currentPlayer = 1;
        playerIndicator.textContent = `Player ${currentPlayer}'s Turn`;
        let timeLeft = 15;
        timer = setInterval(() => {
            timerElement.textContent = timeLeft;
            if(timeLeft <= 0) {
                clearInterval(timer);
                endTurn();
            }
            timeLeft--;
        }, 1000);
    }

    function endTurn() {
        clearInterval(timer);
        if(playerScores[currentPlayer] === 0) {
            alert(`Player ${currentPlayer} is out of the game!`);
            if(playerScores[1] === 0 || playerScores[2] === 0) endGame();
            else currentPlayer === 1 ? startTurn() : startTurn();
        } else {
            startTurn();
        }
    }

    function endGame() {
        clearInterval(timer);
        let winner = playerScores[1] > playerScores[2] ? '1' : (playerScores[1] < playerScores[2] ? '2' : 'Tie');
        endGameMessage.textContent = `Game Over! Player ${winner} wins! Score: ${Math.max(playerScores[1], playerScores[2])}`;
        endGameModal.style.display = "block";
    }

    function playAgain() {
        endGameModal.style.display = "none";
        playerScores = {1: 0, 2: 0};
        currentPlayer = 1;
        currentWord = [];
        initializeGame();
    }

    initializeGame();
</script>

</body>
</html>